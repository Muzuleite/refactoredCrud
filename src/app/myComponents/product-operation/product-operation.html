<table>
    <tr>
        <th>Id</th>
        <th>İsim</th>
        <th>Fiyat</th>
        <th>Kategori Id</th>

        <th>İşlemler</th>
    </tr>

    @for (product of products(); track product.id) {

    <tr>
        <td> {{product.id}}</td>
        <td> {{product.productName}} </td>
        <td> {{product.unitPrice}}</td>
        <td> {{product.categoryId}}</td>
        <td>
            <button (click)="startUpdate(product)">Güncelle</button>
            <button (click)="onDelete(product.id)">Sil</button>
        </td>
    </tr>
    }
</table>

<hr>

<form [formGroup]="createForm" (ngSubmit)="onCreate()">

    <h3 style="color: green;">Kategori Ekle</h3>

    <label> İsim

        <input type="text" formControlName="name" />

    </label>

    @if(getErrorMessageByName(createForm,'name');as msg){
    <div class="error">
        {{msg}}
    </div>
    }

    <label>
        Açıklama
        <input type="text" formControlName="description">
    </label>

    @if(getErrorMessageByName(createForm,'description');as msg){
    <div class="error">
        {{msg}}
    </div>
    }

    <button type="submit" [disabled]="createForm.invalid">Ekle

    </button>

</form>

<br>

@if(selectedProduct() !==null){
<form [formGroup]="updateForm" (ngSubmit)="onUpdate()">
    <h3 style="color: blue;">Kategori Güncelle</h3>

    <input type="hidden" formControlName="id">
    <label>
        İsim:
        <input type="text" formControlName="name">
    </label>

    @if(getErrorMessageByName(updateForm,'name');as msg){
    <div class="error">
        {{msg}}
    </div>
    }
    <label>
        Açıklama:
        <input type="text" formControlName="description">
    </label>
 @if(getErrorMessageByName(updateForm,'description');as msg){
    <div class="error">
        {{msg}}
    </div>
}

<button type ="submit" [disabled]="updateForm.invalid">Güncelle</button>
<button type="button" (click)="cancelUpdate()">İptal</button>
</form>
}